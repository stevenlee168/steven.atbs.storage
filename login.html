<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>Admin Login</title>

        <style>
            body {
                font-family: Arial, sans-serif;
                margin: 0;
                padding-top: 80px;
                background-color: #f4f4f4;
                text-align: center;
            }

            /* ===== BANNER ===== */
            .banner {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                background-color: #4273c3;
                color: white;
                font-size: 20px;
                font-weight: bold;
                padding: 15px 20px;
                z-index: 1000;
                border-bottom-left-radius: 20px;
                border-bottom-right-radius: 20px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
                text-align: left;
            }

            .credit {
                font-size: 12px;
                color: #ddd;
                margin-top: 5px;
            }

            h2 {
                margin-bottom: 25px;
                color: #333;
            }

            /* ===== TABLE ===== */
            .table-container {
                max-width: 1100px;
                margin: auto;
                background: white;
                border-radius: 16px;
                padding: 20px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            }

            table {
                width: 100%;
                border-collapse: collapse;
                table-layout: fixed;
            }

            th,
            td {
                padding: 10px;
                border-bottom: 1px solid #ddd;
                font-size: 14px;
            }

            th {
                background-color: #f0f4ff;
                white-space: nowrap;
            }

            tr:hover {
                background-color: #f9f9f9;
            }

            th:nth-child(1),
            td:nth-child(1) {
                width: 15%;
            }
            th:nth-child(2),
            td:nth-child(2) {
                width: 25%;
            }
            th:nth-child(3),
            td:nth-child(3) {
                width: 10%;
                text-align: center;
            }
            th:nth-child(4),
            td:nth-child(4) {
                width: 10%;
            }
            th:nth-child(5),
            td:nth-child(5) {
                width: 10%;
            }
            th:nth-child(6),
            td:nth-child(6) {
                width: 10%;
            }
            th:nth-child(7),
            td:nth-child(7) {
                width: 20%;
                text-align: center;
            }

            button {
                padding: 8px 14px;
                border-radius: 18px;
                border: 2px solid #007bff;
                background: white;
                cursor: pointer;
                font-weight: bold;
                margin: 2px;
            }

            button:hover {
                background: #007bff;
                color: white;
            }

            /* ===== ACTION BUTTON COLORS ===== */
            .btn-approve {
                border-color: #28a745;
                color: #28a745;
            }

            .btn-approve:hover {
                background: #28a745;
                color: white;
            }

            .btn-reject {
                border-color: #b02a37;
                color: #b02a37;
            }

            .btn-reject:hover {
                background: #b02a37;
                color: white;
            }

            /* ===== LANGUAGE SWITCH ===== */
            .lang-switch {
                position: fixed;
                top: 15px;
                right: 20px;
                display: flex;
                align-items: center;
                gap: 8px;
                z-index: 2000;
                font-weight: bold;
                color: white;
            }

            .switch {
                position: relative;
                display: block;
                width: 46px;
                height: 24px;
                flex-shrink: 0;
            }

            .switch input {
                opacity: 0;
                width: 0;
                height: 0;
            }

            .slider {
                position: absolute;
                cursor: pointer;
                inset: 0;
                background-color: #ccc;
                border-radius: 34px;
                transition: 0.3s;
            }

            .slider:before {
                position: absolute;
                content: "";
                height: 18px;
                width: 18px;
                left: 3px;
                bottom: 3px;
                background-color: white;
                border-radius: 50%;
                transition: 0.3s;
            }

            input:checked + .slider {
                background-color: #007bff;
            }

            input:checked + .slider:before {
                transform: translateX(22px);
            }

            .filter-bar {
                display: flex;
                gap: 12px;
                margin-bottom: 15px;
            }

            .filter-bar input {
                flex: 1;
                padding: 8px 10px;
                border-radius: 8px;
                border: 1px solid #ccc;
                font-size: 14px;
            }

            .actions {
                text-align: center;
                margin-top: 20px;
            }

            /* ===== MOBILE ===== */
            @media (max-width: 480px) {
                body {
                    padding-top: 70px;
                }

                .banner {
                    font-size: 16px;
                    padding: 10px 15px;
                    border-radius: 0;
                }

                .controls {
                    flex-direction: column;
                    align-items: center;
                    gap: 30px;
                }

                button,
                .placeholder {
                    width: 90%;
                    max-width: 320px;
                }
            }
        </style>
    </head>

    <body>
        <!-- ===== BANNER ===== -->
        <div class="banner">
            Inventory Management System
            <div class="credit">
                &copy; Steven Lee - Email: leechunju1608@gmail.com
            </div>

            <div class="lang-switch">
                <span>EN</span>
                <label class="switch">
                    <input type="checkbox" id="langToggle" />
                    <span class="slider"></span>
                </label>
                <span>ä¸­</span>
            </div>
        </div>

        <div class="login-box">
            <h2>Admin Login</h2>

            <input id="loginUser" placeholder="Username" /><br><br>
            <input id="loginPass" type="password" placeholder="Password" /><br><br>

            <button onclick="login()">Login</button>
            <button onclick="location.href='index.html'" >Back</button>
        </div>

        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
            import {
                getFirestore,
                collection,
                getDocs,
                query,
                where
            } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

            /* ===== FIREBASE CONFIG ===== */
            const firebaseConfig = {
                apiKey: "AIzaSyA7zpEseZx9x_hiPcRHtp4h-All7CL-Dog",
                authDomain: "atbs-inventory.firebaseapp.com",
                projectId: "atbs-inventory",
                storageBucket: "atbs-inventory.firebasestorage.app",
                messagingSenderId: "196392830940",
                appId: "1:196392830940:web:e49a096fb56ac6a58cf119"
            };

            const app = initializeApp(firebaseConfig);
            const db = getFirestore(app);

            /* ===== LOGIN ===== */
            window.login = async () => {
                const user = loginUser.value.trim();
                const pass = loginPass.value.trim();

                if (!user || !pass) {
                    alert("Please enter username & password");
                    return;
                }

                const q = query(
                    collection(db, "admins"),
                    where("username", "==", user),
                    where("password", "==", pass)
                );

                const snap = await getDocs(q);

                if (snap.empty) {
                    alert("âŒ Invalid username or password");
                    return;
                }

                const admin = snap.docs[0].data();

                // âœ… Save session (30 minutes)
                localStorage.setItem("adminLogin", admin.username);
                localStorage.setItem("adminName", admin.name || admin.username);
                localStorage.setItem("adminExpire", Date.now() + 30 * 60 * 1000);

                // ðŸ‘‰ Go to admin page
                window.location.href = "admin_confirm.html";
            };

            /* ===== AUTO REDIRECT IF STILL LOGIN ===== */
            document.addEventListener("DOMContentLoaded", () => {
                const expire = Number(localStorage.getItem("adminExpire"));
                const admin  = localStorage.getItem("adminLogin");

                if (admin && expire && Date.now() < expire) {
                    window.location.href = "admin_confirm.html";
                }
            });
        </script>
    </body>
</html>
